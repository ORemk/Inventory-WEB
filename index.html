<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>游닍 Inventario de Productos</title>
    <link rel="stylesheet" href="https://example.com/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="#" class="navbar-logo"><i class="fas fa-box"></i> Inventario</a>
            <ul class="navbar-menu">
                <li><a href="#formulario-inventario"><i class="fas fa-plus-circle"></i> Agregar Producto</a></li>
                <li><a href="#tabla-body"><i class="fas fa-list"></i> Ver Productos</a></li>
                <li><a href="#exportar-excel"><i class="fas fa-file-export"></i> Exportar</a></li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <header>
            <h1><i class="fas fa-boxes"></i> Inventario de Productos</h1>
        </header>

        <!-- Formulario para agregar productos -->
        <form id="formulario-inventario">
            <label for="codigo-producto"><i class="fas fa-barcode"></i> C칩digo del Producto:</label>
            <div style="display: flex; align-items: center; gap: 10px;">
                <input type="text" id="codigo-producto" placeholder="Ingrese el c칩digo del producto" required>
                <button type="button" id="escanear-codigo" class="btn-escanear">
                    <i class="fas fa-camera"></i> Escanear
                </button>
            </div>
            <video id="video" style="display:none; width: 100%; max-width: 400px; border: 1px solid #ccc;"></video>
            <canvas id="canvas" style="display:none;"></canvas>
            
            <label for="nombre-producto"><i class="fas fa-tag"></i> Nombre del Producto:</label>
            <input type="text" id="nombre-producto" placeholder="Ingrese el nombre del producto" required>

            <label for="cantidad"><i class="fas fa-sort-numeric-up"></i> Cantidad:</label>
            <input type="number" id="cantidad" placeholder="Ingrese la cantidad" required>

            <label for="precio"><i class="fas fa-dollar-sign"></i> Precio:</label>
            <input type="number" id="precio" placeholder="Ingrese el precio" required>

            <label for="imagen"><i class="fas fa-image"></i> Subir Imagen del Producto (opcional):</label>
            <input type="file" id="imagen" accept="image/*">

            <button type="submit" class="btn-agregar"><i class="fas fa-plus"></i> Agregar Producto</button>
        </form>
    </div>

    <script>
        document.getElementById("escanear-codigo").addEventListener("click", function() {
            // Verificar si el navegador soporta la API de permisos de la c치mara
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                // Solicitar permisos para la c치mara
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(stream) {
                        // Si el permiso es concedido, iniciamos el escaneo
                        const video = document.getElementById('video');
                        video.style.display = "block";
                        video.srcObject = stream;

                        // Iniciamos el esc치ner
                        const html5QrCode = new Html5Qrcode("video");
                        html5QrCode.start({ facingMode: "environment" }, {
                            fps: 10,
                            qrbox: 250
                        }, (decodedText, decodedResult) => {
                            // Mostramos el valor escaneado en el campo
                            document.getElementById("codigo-producto").value = decodedText;
                            html5QrCode.stop().then(() => {
                                video.style.display = "none"; // Detenemos el video
                            }).catch(err => {
                                console.error("Error al detener el esc치ner:", err);
                            });
                        }).catch(err => {
                            console.error("Error al iniciar el esc치ner:", err);
                        });
                    })
                    .catch(function(err) {
                        alert("Error al acceder a la c치mara: " + err);
                    });
            } else {
                alert("La c치mara no est치 soportada en este navegador.");
            }
        });
    </script>
    <footer>
        <!-- Aqu칤 puedes agregar un pie de p치gina si es necesario -->
    </footer>
</body>
</html>
